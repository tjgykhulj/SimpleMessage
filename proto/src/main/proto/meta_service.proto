syntax = "proto3";

package messagequeue.meta;

option java_package = "com.arnold.msg.proto.meta";
option java_outer_classname = "MetaServiceProto";
option java_multiple_files = true;

import "common.proto";

service MetaService {
    rpc CreateQueue(CreateQueueRequest) returns (QueueResponse);
    rpc DeleteQueue(DeleteQueueRequest) returns (QueueResponse);
    rpc CreateCluster(CreateClusterRequest) returns (ClusterResponse);
    rpc DeleteCluster(DeleteClusterRequest) returns (ClusterResponse);
    rpc AssignDataServer(AssignDataServerRequest) returns (AssignDataServerResponse);
}

message CreateQueueRequest {
    common.QueueInfo queue = 1;
}

message DeleteQueueRequest {
    string name = 1;
}

message QueueResponse {
    common.Response base = 1;
    common.QueueInfo queue = 2;
}

message CreateClusterRequest {
    common.ClusterInfo cluster = 1;
}

message DeleteClusterRequest {
    string name = 1;
}

message ClusterResponse {
    common.Response base = 1;
    common.ClusterInfo cluster = 2;
}

message AssignDataServerRequest {
    string queue_name = 1;
    string client_type = 2;
    string partition_key = 3;
}

message AssignDataServerResponse {
    common.Response base = 1;
    repeated common.DataServer data_servers = 2;
    string partition_id = 3;
}