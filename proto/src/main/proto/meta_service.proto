syntax = "proto3";

package messagequeue.meta;

option java_package = "com.arnold.msg.proto.meta";
option java_outer_classname = "MetaServiceProto";
option java_multiple_files = true;

import "common.proto";

service MetaService {
    rpc AssignDataServer(AssignDataServerRequest) returns (AssignDataServerResponse);
    rpc CreateQueue(CreateQueueRequest) returns (common.QueueInfo);
    rpc DeleteQueue(DeleteQueueRequest) returns (common.QueueInfo);
    rpc CreateCluster(CreateClusterRequest) returns (common.ClusterInfo);
    rpc DeleteCluster(DeleteClusterRequest) returns (common.ClusterInfo);
    rpc CreateProducer(CreateProducerRequest) returns (common.ProducerInfo);
    rpc CreateConsumer(CreateConsumerRequest) returns (common.ConsumerInfo);
}

message CreateProducerRequest {
    common.ProducerInfo producer = 1;
}

message CreateConsumerRequest {
    common.ConsumerInfo consumer = 1;
}


message CreateQueueRequest {
    common.QueueInfo queue = 1;
}

message DeleteQueueRequest {
    string name = 1;
}

message CreateClusterRequest {
    common.ClusterInfo cluster = 1;
}

message DeleteClusterRequest {
    string name = 1;
}

message AssignDataServerRequest {
    string queue_name = 1;
    string client_type = 2;
    string partition_key = 3;
}

message AssignDataServerResponse {
    repeated common.DataServer data_servers = 2;
    string partition_id = 3;
}